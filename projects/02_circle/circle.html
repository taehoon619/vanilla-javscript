<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>circle 그리기3</title>
    <style>
        section{
            display: flex;
            width: 600px;
            height: 600px;
        }
        #circle{
            position: absolute;
            /* height: auto; */
            border-radius: 50%;
            /* background-color: red; */
        }
    </style>
</head>
<body>
    <section id="circleSection"></section>
    <script>
    const section = document.getElementById('circleSection');

    const createCircle = () => {
        let circle = document.createElement('div');
        circle.setAttribute('id','circle');

        section.appendChild(circle);

        return circle;
    }

    const changeCircle = (circle) => {
        const circlePosX = Math.floor(Math.random()*500)+1
        const circlePosY = Math.floor(Math.random()*500)+1  
        let circlePi = Math.floor(Math.random()*20)+1

        circle.style.top = circlePosY + "px";
        circle.style.left = circlePosX + "px";

        const circleTimer = setInterval(() => {
            circlePi += 1
            circle.style.width = circlePi + "px";
            circle.style.height = circlePi + "px";
            circle.style.backgroundColor = createRandomColor()
            if(circlePi > 50){
                clearInterval(circleTimer)
                deleteCircle(circle) // 문제
            } 
        }, 100)
    }

    const deleteCircle = (createdCircle) => {
    section.removeChild(createdCircle) // 문제
    }

    const clickLocation = (circle) => {
        let clickX = event.clientX;
        let clickY = event.clientY;
        let circlePi = Math.floor(Math.random()*20)+1

        circle.style.top = clickY + "px";
        circle.style.left = clickX + "px";

        const circleTimer = setInterval(() => {
            circlePi += 1
            circle.style.width = circlePi + "px";
            circle.style.height = circlePi + "px";
            circle.style.backgroundColor = createRandomColor()
            if(circlePi > 50){
                clearInterval(circleTimer)
                deleteCircle(circle) // 문제
            } 
        }, 100)
    }

    const createRandomColor = (changeCircle, clickLocation) => {
        let randomColor = Math.random() * 0xffffff;
        let colorCode = "#" + Math.round(randomColor).toString(16);

        return colorCode;
    }

    const circleHandelClick = () => {
        let createdCircle = createCircle();
        clickLocation(createdCircle)
    } 

    const circleHandelKeyDown = () => {
        if(event.keyCode === 68){
            let createdCircle = createCircle();
            changeCircle(createdCircle)
        }
    }

    window.addEventListener('keydown', circleHandelKeyDown)
    window.addEventListener('click',circleHandelClick)
    </script>
</body>
</html>